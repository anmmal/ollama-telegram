with open("knowledge_base.txt", "r", encoding="utf-8") as f:
    KNOWLEDGE_BASE = f.read()

prompt = f"""{SYSTEM_PROMPT}

WORKING_HOURS = {
    "start": time(7, 0),   # 07:00
    "end": time(23, 0)     # 23:00
}

def is_within_working_hours():
    now = datetime.now().time()
    return WORKING_HOURS["start"] <= now <= WORKING_HOURS["end"]

Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©:
{KNOWLEDGE_BASE}

Ø§Ù„ØªØ²Ù… ÙÙ‚Ø· Ø¨Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø¹Ù„Ø§Ù‡ØŒ ÙˆØ¥Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø®Ø§Ø±Ø¬Ù‡Ø§ Ù„Ø§ ØªØ¬Ø¨ ÙˆØ§Ø·Ù„Ø¨ ØªØ­ÙˆÙŠÙ„Ù‡ Ù„Ù…ÙˆØ¸Ù.

Ø³Ø¤Ø§Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ„:
{user_message}
def reply(update, context):
    user_message = update.message.text

    # 1ï¸âƒ£ Ø®Ø§Ø±Ø¬ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„
    if not is_within_working_hours():
        update.message.reply_text(
            "Ø­ÙŠØ§Ùƒ Ø§Ù„Ù„Ù‡ ðŸ¤\n"
            "Ø­Ø§Ù„ÙŠØ§Ù‹ Ø®Ø§Ø±Ø¬ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„.\n"
            "ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ø³ØªÙØ³Ø§Ø±ÙƒØŒ ÙˆØ¨ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ø¨Ø£Ù‚Ø±Ø¨ ÙˆÙ‚Øª.\n\n"
            "ØªØ­Ø¨ Ø£Ø¯ÙˆÙ‘Ù† Ø§Ø³Ù…Ùƒ ÙˆØ±Ù‚Ù…ÙƒØŸ"
        )
        return

    # 2ï¸âƒ£ Ø·Ù„Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù…ÙˆØ¸Ù
    handoff_keywords = ["Ù…ÙˆØ¸Ù", "Ø´ÙƒÙˆÙ‰", "Ø¥Ø¯Ø§Ø±Ø©", "ØªØ­ÙˆÙŠÙ„", "Ø¥Ù†Ø³Ø§Ù†"]
    if any(word in user_message for word in handoff_keywords):
        update.message.reply_text(
            "Ø£ÙƒÙŠØ¯ ðŸ¤\n"
            "Ø¨Ø³Ø¬Ù„ Ø§Ø³ØªÙØ³Ø§Ø±Ùƒ ÙˆØ£Ø­ÙˆÙ‘Ù„Ù‡ Ù„Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ø®ØªØµ.\n"
            "Ù…Ù…ÙƒÙ† ØªØ±Ø³Ù„ Ø§Ø³Ù…Ùƒ ÙˆØ±Ù‚Ù…ÙƒØŸ"
        )
        return

    # 3ï¸âƒ£ Ø§Ù„Ø±Ø¯ Ø§Ù„Ø°ÙƒÙŠ (Ollama)
    # â† Ù‡Ù†Ø§ ÙŠÙƒÙ…Ù‘Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¹Ù†Ø¯Ùƒ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„Ù…ÙˆØ¯ÙŠÙ„
"""

A R K Ù‡ÙŠ Ø´Ø±ÙƒØ© ÙƒÙˆÙŠØªÙŠØ© Ù…ØªØ®ØµØµØ© Ø¨Ø§Ù„Ù‚Ù‡ÙˆØ© ÙˆØ§Ù„Ø´Ø§ÙŠ Ø§Ù„Ù…Ø®ØªØµ.
Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: www.ark.com.kw
Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: 33 Street, Building 367, Block 1, 70070 Rai, Kuwait
Ø§Ù„Ø£Ù‚Ø³Ø§Ù…: CafÃ© â€“ Roasters â€“ Tea
